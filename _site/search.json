[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "608VAA",
    "section": "",
    "text": "Welcome to ISSS608 Visual Analytics and Applications! In this website, you will find all interesting content about this course!"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/TakeHome02.html",
    "href": "Take-home_Ex/Take-home_Ex02/TakeHome02.html",
    "title": "Take Home Exercise 2",
    "section": "",
    "text": "Overview\n\nIntroduction\nThe country of Oceanus has sought FishEye International’s help in identifying companies possibly engaged in illegal, unreported, and unregulated (IUU) fishing. FishEye’s analysts had received import/export data for Oceanus’ marine and fishing industries, but the data is incomplete. FishEye had subsequently transformed the trade data into a knowledge graph to help them understand the business relationships, including finding links that will stop IUU fishing and protect marine species.\nWe will address Question 1 of VAST challenge 2023 - To Use visual analytics to identify temporal patterns and categorise types of business relationship for individual entities and between entities in FishEye’s knowledge graph.\n\n\nMethodology\nTo select and use different attributes to identify the interactions and relationship among companies and their attributes.\n\n\nData Preparation\n\nInstalling and loading of R packages\nThe code chunk below will be used to install and load the necessary R packages as follows:\n\njsonlite: a package supports both reading and writing JSON files, as well as working with JSON data retrieved from web APIs.\nigraph: a package in R that offers a wide range of tools for creating, manipulating, and visualizing graphs, as well as various algorithms and metrics for network analysis.\ntidygraph: provides a tidy and consistent approach to working with graph data using the principles of the tidyverse\nggraph: an extension package in R that builds upon the tidygraph and ggplot2 packages. It provides a high-level interface for creating visualizations of graph data using the grammar of graphics approach.\nviznetwork: a package provides geoms for ggplot2 to repel overlapping text labels.\nlubridate: a package in R that provides functions for working with dates and times. It aims to simplify common tasks related to date and time manipulation and offers a consistent and intuitive interface.\ntidyverse: a family of modern R packages specially designed to support data science, analysis and communication task including creating static statistical graphs.\n\n\n\nCode\npacman::p_load(jsonlite, igraph, tidygraph, ggraph, \n               visNetwork, lubridate, clock,\n               tidyverse, graphlayouts)\n\n\n\n\n\n\nThe Data\nThe function fromJSON() of jsonlite package is used to import mc2_challenge_graph.json into R environment. The data comprises:\n\n“nodes” dataframe: 34576 observations of 4 variables: shpcountry, rcvcountry, dataset, id\n“links” daraframe with 5464378 observations of 9 variables: arrivaldate, hscodes, valueofgoods_omu, volumetsu, weightkg, dataset, source, target, valueofgoodusd\n\n\n\nCode\nmc2_data <- fromJSON(\"data/mc2_challenge_graph.json\")\n\n\n\nData Preparation\n\nExtracting the edges\nWe extract edges data table from mc2_data list object and save the output in a tibble data frame object called mc2_edges. Together with the nodes, the edges will be used to build and visualise the network graphs for our subsequent analysis. As part of the data wrangling, we will convert the format of data in “ArrivalDate” column to ymd date format, ans use this field to create a new attribute column ” Year”.\n\n\nCode\nmc2_edges <- as_tibble(mc2_data$links) %>%\n  mutate(ArrivalDate = ymd(arrivaldate)) %>%\n  mutate(Year = year(ArrivalDate)) %>%\n  select(source, target, ArrivalDate, Year, hscode, valueofgoods_omu, \n         volumeteu, weightkg, valueofgoodsusd) %>% \n  distinct()\n\n\n\n\nPreparation of edge data\nWe will first filter hscodes that are relevant to seafood for the visual analysis. For example, codes with “03XX” refer to fish, crustaceans and molluscs etc. Codes with “1504” refer to animal fats and oils, those with “1603” to “1605” refers to preparation of fish and molluscus. “2301” ,which refers to meals and pellets of fish/crustaceans/molluscs, is also used. In addition, it is observed that many columns of the dataset have “NA” values, and they will not be used further. We have also focus on those nodes with higher number of edges connections to target our analysis.\n\n\nCode\n#filter the relevant hscodes for analysis\nhscodes_filtered <- c(\"0301\", \"0302\", \"0303\", \"0304\", \"0305\",\"0306\", \"0307\", \"0308\", \"0309\", \"1504\",\"1603\", \"1604\", \"1605\", \"2301\")\n\nmc2_edges_aggregated <- mc2_edges %>%\n  filter(substr(as.character(hscode), 1, 4) %in% hscodes_filtered) %>%\n  #filter(hscode %in% hscodes_filtered) %>%\n  group_by(source, target, hscode, Year) %>%\n    summarise(weights = n()) %>%\n  filter(source!=target) %>%\n  #filter(weights > 50) %>%\n  ungroup()\n\n\n\n\nPreparing nodes data\nInstead of using the nodes data table extracted from mc2_data, we will prepare a new nodes data table by using the source and target fields of mc2_edges_aggregated data table. This is necessary to ensure that the nodes in nodes data tables include all the source and target values.\n\n\nCode\nid1 <- mc2_edges_aggregated %>%\n  select(source) %>%\n  rename(id = source)\nid2 <- mc2_edges_aggregated %>%\n  select(target) %>%\n  rename(id = target)\nmc2_nodes_extracted <- rbind(id1, id2) %>%\n  distinct()\n\n\nWe use the following code chunk to create a tbl_graph object.\n\n\nCode\nmc2_graph <- tbl_graph(nodes = mc2_nodes_extracted,\n                       edges = mc2_edges_aggregated,\n                       directed = TRUE)\n\n\n\n\nComputation of Centrality Metrices\nNext, we compute the necessary centrality metrics and stored in respective columns created in the graph object. The respective metric values will be extracted accordingly and be used in the subsequent network plots in the visual analysis.\n\n\nCode\ngraph1 <- mc2_graph %>%\n\n  activate(nodes) %>%\n  #as_tibble() %>%\n  mutate(betweenness_centrality = centrality_betweenness()) %>%\n    mutate(deg_bin0 = cut(betweenness_centrality, breaks = c(0, 3000, 7000, Inf),\n                       labels = c(\"Low\\n(0-2999)\", \n                                  \"Medium\\n(3000-6999)\", \n                                  \"High\\n(>=7000)\\n\"),  \n                       include.lowest = TRUE))  %>%\n  \n  \n  mutate(in_degree_centrality = degree(mc2_graph, mode = \"in\")) %>%\n   mutate(deg_bin1 = cut(in_degree_centrality, breaks = c(0, 200, 300, Inf),\n                       labels = c(\"Low\\n(0-199)\", \n                                  \"Medium\\n(200-299)\", \n                                  \"High\\n(>=300)\\n\"),  \n                       include.lowest = TRUE))  %>%\n  \n  mutate(out_degree_centrality = degree(mc2_graph, mode = \"out\")) %>%\n    mutate(deg_bin2 = cut(out_degree_centrality, breaks = c(0, 175, 300, Inf),\n                       labels = c(\"Low\\n(0-174)\", \n                                  \"Medium\\n(175-299)\", \n                                  \"High\\n(>=300)\\n\"),  \n                       include.lowest = TRUE))  %>%\n  \n  mutate(closeness_centrality = round(centrality_closeness(),2)) %>%\n     mutate(deg_bin3 = cut(closeness_centrality, breaks = c(0, 0.3, 0.6, Inf),\n                       labels = c(\"Low\\n(0-0.29)\", \n                                  \"Medium\\n(0.3-0.59)\", \n                                  \"High\\n(>=0.6)\\n\"),  \n                       include.lowest = TRUE))  %>%\n  \n  mutate(Eigenvalue_centrality = round(centrality_eigen(),2)) %>%\n      mutate(deg_bin4 = cut(Eigenvalue_centrality, breaks = c(0, 0.3, 0.6, Inf),\n                       labels = c(\"Low\\n(0-0.29)\", \n                                  \"Medium\\n(0.3-0.59)\", \n                                  \"High\\n(>=0.6)\\n\"),  \n                       include.lowest = TRUE))  %>%\n  \n  mutate(clustering_coefficient = round(transitivity(mc2_graph, type = \"local\"),2)) %>%\n   mutate(deg_bin5 = cut(clustering_coefficient, breaks = c(0, 0.3, 0.6, Inf),\n                       labels = c(\"Low\\n(0-0.29)\", \n                                  \"Medium\\n(0.3-0.59)\", \n                                  \"High\\n(>=0.6)\\n\"),  \n                       include.lowest = TRUE))\n\n\n\n\nPreparing the base nodes and edges for visualisation\nTo create the interactive plots, we will need to prepare the data. This is first done by creating the master edges and master modes from the graph object earlier. The master edges and master nodes will be manipulated to develop the different visual presentations on the respective centrality metrices.\n\n\nCode\n# create master edges\nmain_edges <- mc2_edges_aggregated\n\n\n\n\nCode\n#create master nodes\nmain_nodes <- graph1 %>%\n  activate(\"nodes\") %>%\n  as_tibble()\n\n\n\n\n\n\n\n\n\nVisualisation\n\nVisualisation and Analysis of Betweenness Centrality\nBetweenness centrality measures the extent to which a node lies on the shortest paths between other pairs of nodes in the network. It also quantifies the node’s influence as a bridge or intermediary in the flow of information or resources within the network.By identifying nodes with high betweenness centrality, network analysts can gain insights into the nodes that are crucial for maintaining efficient communication, facilitating the spread of information, and controlling the network’s overall connectivity.\nThe colour code from the plot allows us to identify the nodes with high, medium and low betweenness centrality values. For instance, Adriatic Tuna Seabass BV Transit and Selous Game Reserve S.A. de C.V are identified as nodes with high betweenness with multiple incoming links as well as out going links to other nodes (e.g. such as to hai dan Corporation Wharf etc.). We can infer that these could be intermediates that transport the catch from the fishing boats/companies to the wharfs/distribution houses.\n\n\nCode\n#filter and reduce nodes\nnodes_between <- main_nodes %>%\n  arrange(desc(betweenness_centrality)) %>%\n  slice_max(order_by = betweenness_centrality, n = 5) \n\n\n\n\nCode\n# filter edges based on reduced nodes\nedges_between  <- main_edges %>%\n  filter(source %in% nodes_between$id | target %in% nodes_between$id) %>%\n  arrange(source, target)\n\n#filter nodes based on filtered edge nodes for plotting\nnodes_between_plot  <- main_nodes %>%\n  filter(id %in% c(edges_between$source, edges_between$target)) %>%\n  rename(group = deg_bin0)  %>%\n  arrange(id)\n\n\n\n\nCode\n#prep format for plotting\nedges_between <- edges_between %>%\nrename(from = source) %>%\nrename(to = target) %>%\n#filter (Year == \"2028\") %>%\nfilter(from!=to) %>%\nungroup()\n\n\n\n\nCode\n# Plot network graph\nvisNetwork(nodes_between_plot, edges_between) %>%\n  visEdges(arrows = \"to\") %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visOptions(highlightNearest = TRUE, nodesIdSelection = TRUE) %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123) \n\n\n\n\n\n\n\n\n\n\n\nVisualisation and Analysis of In_degree Centrality\nThe in_degree centrality reflects the number of other nodes that have edges pointing towards the node, indicating the node’s popularity or importance in terms of receiving connections or information from other nodes. Nodes with high in-degree centrality are often seen as influential or important in terms of receiving information, resources, or influence from other nodes.\nIn this network, we can see that entities such as Mar del Este CJSC and hai dan Corporation Wharf have high numbers of incoming edges from other nodes. These entities could be wharfs/distribution houses where the catch is delivered to them.\n\n\nCode\n#filter and reduce nodes\nnodes_indegree <- main_nodes %>%\n  arrange(desc(in_degree_centrality)) %>%\n  #filter(in_degree_centrality > 1000)\n  slice_max(order_by = in_degree_centrality, n = 10)\n\n\n\n\nCode\n# filter edges based on reduced nodes\nedges_indegree  <- main_edges %>%\n  filter(source %in% nodes_indegree$id | target %in% nodes_indegree$id) %>%\n  filter(weights > 50) %>%\n  arrange(source, target)\n\n#filter nodes based on filtered edge nodes for plotting\nnodes_indegree_plot  <- main_nodes %>%\n  filter(id %in% c(edges_indegree$source, edges_indegree$target)) %>%\n  rename(group = deg_bin1)  %>%\n  arrange(id)\n\n\n\n\nCode\n#prep format for plotting\nedges_indegree <- edges_indegree %>%\nrename(from = source) %>%\nrename(to = target) %>%\n#filter (Year == \"2028\") %>%\nfilter(from!=to) %>%\nungroup()\n\n\n\n\nCode\n# Plot network graph\nvisNetwork(nodes_indegree_plot, edges_indegree) %>%\n  visEdges(arrows = \"to\") %>%\n  visIgraphLayout(layout = \"layout_with_kk\") %>%\n  visOptions(highlightNearest = TRUE, nodesIdSelection = TRUE) %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123)\n\n\n\n\n\n\n\n\n\n\n\nVisualisation and Analysis of Out_degree Centrality\nOut-degree centrality specifically measures the number of outgoing edges from a node in a directed graph, indicating the node’s ability to send connections or information to other nodes. It quantifies the number of other nodes that the node is connected to with outgoing edges.\nWE can infer from the plot that Shou gan Oyj Overseas and Oceano del Este SRL are two nodes with the highest out_degree centrality value and they could be large fishing companies. It is also oberved that their outgoing links goes to logistics and transport companies.\n\n\nCode\n#filter and reduce nodes\nnodes_outdegree <- main_nodes %>%\n  arrange(desc(out_degree_centrality)) %>%\n  slice_max(order_by = out_degree_centrality, n = 5)\n\n\n\n\nCode\n# filter edges based on reduced nodes\nnodes_outdegree <- nodes_outdegree\nedges_outdegree  <- main_edges %>%\n  filter(source %in% nodes_outdegree$id | target %in% nodes_outdegree$id) %>%\n  arrange(source, target)\n\n#filter nodes based on filtered edge nodes for plotting\nnodes_outdegree_plot  <- main_nodes %>%\n  filter(id %in% c(edges_outdegree$source, edges_outdegree$target)) %>%\n  rename(group = deg_bin2)  %>%\n  arrange(id)\n\n#prep format for plotting\nedges_outdegree <- edges_outdegree %>%\nrename(from = source) %>%\nrename(to = target) %>%\n#filter (Year == \"2028\") %>%\nfilter(from!=to) %>%\nungroup()\n\n\n\n\nCode\n# Plot network graph\nvisNetwork(nodes_outdegree_plot, edges_outdegree) %>%\n  visEdges(arrows = \"to\") %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visOptions(highlightNearest = TRUE, nodesIdSelection = TRUE) %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123)\n\n\n\n\n\n\n\n\n\n\n\nCloseness Centrality\nCloseness centrality is a measure used in network analysis to quantify the centrality of nodes based on their proximity to other nodes in the network. It measures how close a node is to all other nodes in terms of the shortest path distances.The closer a node is to all other nodes, the higher its closeness centrality. One example of nodes that are high in closeness centrality is Estrella del Mar Tilapia Oyj Marine which is linked to Adriatic Tuna Seabass BV Transit which has the hightest betweeness centrality score.\n\n\nCode\n#compute centrality and filter high value nodes\nnodes_closeness <- main_nodes %>%\n  arrange(desc(closeness_centrality)) %>%\n  #filter(betweenness_centrality > 1000000)\n  slice_max(order_by = closeness_centrality, n = 900)\n\n\n\n\nCode\n# filter edges based on filtered nodes\nedges_closeness <- main_edges %>%\n  filter(source %in% nodes_closeness$id | target %in% nodes_closeness$id) %>%\n  filter(weights > 50) %>%\n  arrange(source, target)\n\n#filter nodes based on filtered edge nodes for plotting\nnodes_closeness_plot  <- main_nodes %>%\n  filter(id %in% c(edges_closeness$source, edges_closeness$target)) %>%\n  rename(group = deg_bin3)  %>%\n  arrange(id)\n\n\n#prep format\nedges_closeness <- edges_closeness %>%\nrename(from = source) %>%\nrename(to = target) %>%\n#filter (Year == \"2028\") %>%\nfilter(from!=to) %>%\nungroup()\n\n\n\n\nCode\n# Plot network graph\nvisNetwork(nodes_closeness_plot, edges_closeness) %>%\n  visEdges(arrows = \"to\") %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visOptions(highlightNearest = TRUE, nodesIdSelection = TRUE) %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123)\n\n\n\n\n\n\n\n\n\n\n\nEigenvalue Centrality\nEigenvalue centrality is a measure of node centrality in a network based on the concept of eigenvectors.The idea behind eigenvalue centrality is that a node is considered central if it is connected to other nodes that are themselves central. Thus, the centrality of a node depends not only on the number of connections it has but also on the centrality of those connections. Not surprisingly Mar Del Este CJS and hai dan Corporation Wharf have the highest eigenvalue scores here as they are wharfs/distribution houses and have high upstream connectivity with other “central” entities such as intermediaries.\n\n\nCode\n#filter and reduce nodes\nnodes_eigen <- main_nodes %>%\n  arrange(desc(Eigenvalue_centrality)) %>%\n  #filter(betweenness_centrality > 1000000)\n  slice_max(order_by = Eigenvalue_centrality, n = 15)\n\n\n\n\nCode\n# filter edges based on reduced nodes\nedges_eigen  <- main_edges %>%\n  filter(source %in% nodes_eigen$id | target %in% nodes_eigen$id) %>%\n  filter(weights > 70) %>%\n  arrange(source, target)\n\n#filter nodes based on filtered edge nodes for plotting\nnodes_eigen_plot  <- main_nodes %>%\n  filter(id %in% c(edges_eigen$source, edges_eigen$target)) %>%\n  rename(group = deg_bin4)  %>%\n  arrange(id)\n\n\n#prep format for plotting\nedges_eigen <- edges_eigen %>%\nrename(from = source) %>%\nrename(to = target) %>%\n#filter (Year == \"2028\") %>%\nfilter(from!=to) %>%\nungroup()\n\n\n\n\nCode\n# Plot network graph\nvisNetwork(nodes_eigen_plot, edges_eigen) %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visEdges(arrows = \"to\", smooth = list(enabled = TRUE, type = \"curvedCW\")) %>%\n  visOptions(highlightNearest = TRUE, nodesIdSelection = TRUE) %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123)\n\n\n\n\n\n\n\n\n\n\n\nVisualisation of In_degree centrality across the years\nThe In_degree network graphs from 2028 to 2034 are plotted for comparison in a facet. This will provide us with an overview on how the trend of In_degree centrality metric changes over time. We will also closely examine the difference between the first and last year for more insights.\n\n\nCode\n#set as graph object using nodes and edges for in_degree centrality\nstaticgraph_indegree <- tbl_graph(nodes = nodes_indegree_plot,\n                       edges = edges_indegree,\n                       directed = TRUE)\n\n\n#Plotting the graph\nset_graph_style() \n\ng <- ggraph(staticgraph_indegree, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=weights), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = group), \n                  size = 1)\n\n#putting as a facet presentation  \ng + facet_edges(~Year) +\n  th_foreground(foreground = \"grey80\",  \n                border = TRUE) +\n  theme(legend.position = 'bottom')\n\n\n\n\n\n\n\nIn_degree Centrality analysis in Year 2028\nFrom the plot, it is observed that hai dan Corporation Wharf has received the most incoming links from Goa Seaside So Overseas as well as SeaSelect Foods Salt Spray, as shown by the weights (thickness) of the edges between these nodes. For Mar Del Este CJS and Pao gan SE Seal, their biggest supplier is Danish Place Swordfish AB Shipping and Saltsea & Inc Carriers respectively.\n\n\nCode\n# filter edges based on reduced nodes\nedges_indegree2028  <- main_edges %>%\n  filter(source %in% nodes_indegree$id | target %in% nodes_indegree$id) %>%\n  filter(Year == 2028) %>%\n  filter(weights > 50) %>%\n  arrange(source, target)\n\n#filter nodes based on filtered edge nodes for plotting\nnodes_indegree_plot2028  <- main_nodes %>%\n  filter(id %in% c(edges_indegree2028$source, edges_indegree2028$target)) %>%\n  rename(group = deg_bin1)  %>%\n  arrange(id)\n\n\n#set as graph object using nodes and edges for in_degree centrality\nstaticgraph_indegree <- tbl_graph(nodes = nodes_indegree_plot2028,\n                       edges = edges_indegree2028,\n                       directed = TRUE)\n\n\n#Plotting the graph\nset_graph_style() \n\ng <- ggraph(staticgraph_indegree, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=weights), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = group), \n                  size = 2) \n\n#putting as a facet presentation  \ng +\n  geom_node_text(aes(label = id), size = 2, repel=TRUE) +\n  ggtitle(\"In_degree Centrality Plot in Year 2028\") + \n  th_foreground(foreground = \"grey80\",  \n                border = TRUE) +\n  theme(legend.position = 'bottom')\n\n\n\n\n\n\n\nIn_degree Centrality analysis in Year 2034\nMoving forward to 2034, we can observe that the landscape has totally changed from 2028. LLC SA de CV, who used to supply to hai dan Corporation Wharf, is now their biggest supplier in 2034. Similarly, Mar Del Este CJS’s biggest supplier is now Estrella de la Costa who had also supplied them six years ago, abeit at a reduced weight (edges). Interestingly, we do not see Pao gan SE Seal, one of the nodes who was high in in_degree centrality score in 2028. By such comparisons between each year, we can chart the movement of the entities in FishEye’s knowledge graph and obtain deeper insights on their characteristics and behaviours.\n\n\nCode\n# filter edges based on reduced nodes\nedges_indegree2034  <- main_edges %>%\n  filter(source %in% nodes_indegree$id | target %in% nodes_indegree$id) %>%\n  filter(Year == 2034) %>%\n  filter(weights > 80) %>%\n  arrange(source, target)\n\n#filter nodes based on filtered edge nodes for plotting\nnodes_indegree_plot2034  <- main_nodes %>%\n  filter(id %in% c(edges_indegree2034$source, edges_indegree2034$target)) %>%\n  rename(group = deg_bin1)  %>%\n  arrange(id)\n\n\n#set as graph object using nodes and edges for in_degree centrality\nstaticgraph_indegree <- tbl_graph(nodes = nodes_indegree_plot2034,\n                       edges = edges_indegree2034,\n                       directed = TRUE)\n\n\n#Plotting the graph\nset_graph_style() \n\ng <- ggraph(staticgraph_indegree, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=weights), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = group), \n                  size = 2) \n\n#putting as a facet presentation  \ng +\n  geom_node_text(aes(label = id), size = 2, repel=TRUE) +\n  ggtitle(\"In_degree Centrality Plot in Year 2034\") + \n  th_foreground(foreground = \"grey80\",  \n                border = TRUE) +\n  theme(legend.position = 'bottom')\n\n\n\n\n\n\n\n\nConclusion\nThe visualisation and analysis of network data has helps us in understanding complex relationships and uncovering patterns within networks. It has enabled us to uncover valuable insights on central entities and influential nodes, and gain a deeper understanding of the complex network of business relationships of the entities within FishEye’s knowledge graph."
  }
]